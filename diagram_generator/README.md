# Diagram Generator

Скрипт **generate_diagram.py** генерирует диаграмму в формате PNG из файла модели в форматах DSL или JSON.  

## Установка
> **ВАЖНО!**
> Работа скрипта протестирована в Windows, работа в других операционных системах не гарантируется.

Установите следующие компоненты:
* [Python 3](https://www.python.org/downloads/windows/)
* [Docker](https://docs.docker.com/desktop/install/windows-install/)

## Запуск

Для генерации диаграммы выполните следующие действия:
1. Запустите Docker.
2. Скачайте файлы проекта и разместите их в удобном для вас каталоге (далее — каталог скрипта).
3. Поместите файл модели **workspace.dsl** или **workspace.json** в каталог скрипта.
4. Откройте командную строку (PowerShell или cmd) и перейдите в каталог скрипта.
    ```sh
    cd путь/к/каталогу/скрипта
    ```
5. Запустите скрипт командой:
    ```sh
    python generate_diagram.py
    ```

После завершения работы скрипта, сгенерированная диаграмма с расширением **.png** будет располагаться в каталоге скрипта.

## Возможные ошибки

Во время работы скрипта ошибки выводятся в консоль. Часть из них описана в таблице ниже:

| Ошибка                                                                                     | Описание                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Error: workspace file not found. Please ensure 'workspace.dsl' or 'workspace.json' exists. | Не найден файл модели. Он должен называться **workspace.dsl** или **workspace.json** и располагаться в том же каталоге, что и сам скрипт.                                          |
| Docker daemon is not running. Start Docker and retry.                                      | Docker Engine не запущен. Запустите Docker или перезапустите его, если он был запущен ранее.                                                                                       |
| Error: requirements.txt file not found.                                                    | Убедитесь, что файл **requirements.txt** располагается в том же каталоге, что и скрипт.                                                                                            |
| Failed to start Structurizr Lite                                                           | Structurizr не запускается скриптом. Проверьте, запускается ли сервис вручную (см. [официальную документацию Structurizr](https://docs.structurizr.com/lite/installation#docker)). |

При запуске скрипт проверяет и устанавливает сервисы, которые требуются для его работы.
Если возникают ошибки при работе этих сервисов, установите их вручную:
* [Structurizr Lite](https://hub.docker.com/r/structurizr/lite)
* [Node.js](https://nodejs.org/en/download/package-manager)
* [Puppeteer](https://developer.chrome.com/docs/puppeteer/get-started)