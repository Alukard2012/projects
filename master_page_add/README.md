# Master Page Add

Скрипт **masterPageAdd.py** добавляет Master Page в топики, в которых он не указан.
Обрабатываются htm-файлы, в которых отсутствуют:
* Параметр **mc-master-page** в атрибуте **style** внутри тега **\<html\>**.
* Атрибут **style** внутри тега **\<html\>**.

Для работы скрипта установите следующие компоненты:

* Библиотека [Beautiful Soup 4](https://www.crummy.com/software/BeautifulSoup/bs4/doc.ru/bs4ru.html).
* Парсер [XML](https://www.crummy.com/software/BeautifulSoup/bs4/doc.ru/bs4ru.html#parser-installation).

## Быстрый старт

Для добавления Master Page в топики:

1. Поместите скрипт в корневой каталог, из которого начнется поиск файлов топиков в подкаталогах.
2. Запустите скрипт.
3. Включите логирование в консоли при необходимости:
   * 1 — логирование включено.
   * 0 — логирование выключено.
4. Дождитесь завершения работы скрипта.

## Настройка скрипта

В скрипте доступна настройка с помощью переменных:

* _dir_path_ — директория, из которой начнется поиск файлов. По умолчанию используется каталог, в котором расположен скрипт. При необходимости можно указать абсолютный путь до другого каталога, в этом случае перемещать скрипт в указанный каталог не нужно.
* _extension_ — расширение обрабатываемых файлов. По умолчанию скрипт ищет файлы с расширением **.htm**.
* _dir_name_ — название каталога, от которого расчитывается относительный путь для вставки Master Page. По умолчанию указан каталог "Content".
* _masterpage_ — файл Master Page с расширением, который требуется добавить в искомые файлы. По умолчанию указан "SideNavPrettifyMistakes.flmsp".

## Логи

Файлы логов создаются в том же каталоге, где расположен скрипт. В них хранится следующая информация:

* _style_added.log_ — файлы, в которые добавлен атрибут **style** с параметром **mc-master-page**.
* _masterpage_added.log_ — файлы, в которые добавлен параметр **mc-master-page**.
* _not_changed.log_ — не измененные файлы, в которых Master Page уже указан.

В логах также отображается содержимое атрибута **style** тега **\<html\>** каждого указанного файла.

Файлы логов удаляются при каждом запуске скрипта с включенной функцией логирования.